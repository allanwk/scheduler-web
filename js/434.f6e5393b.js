"use strict";(self["webpackChunkhorario"]=self["webpackChunkhorario"]||[]).push([[434],{2643:function(e,t,i){i.r(t),i.d(t,{default:function(){return Z}});var s=i(7179),n=i(3058),o=i(5223),a=i(4437),l=i(9531),r=i(5452),d=i(5057),c=i(5294),u=i(4544),f=i(5234),m=i(5251),h=i(1002),p=i(2370),g=function(){var e=this,t=e._self._c;return t(n.Z,{staticClass:"mx-auto mt-5"},[t(c.Z,[t(a.Z,[t(l.Z,{staticClass:"tabela",attrs:{headers:e.headers,items:e.turnoSelecionado in e.linhasMinimos?e.linhasMinimos[e.turnoSelecionado]:[],"hide-default-footer":"","disable-pagination":"","disable-filtering":"","disable-sort":"",dense:""},scopedSlots:e._u([{key:"top",fn:function(){return[t(h.Z,{attrs:{flat:""}},[t(p.qW,[e._v("Mínimos")]),t(d.Z,{staticClass:"ml-1",on:{click:function(t){e.dialogDeleteMinimums=!0}}},[e._v("mdi-delete")]),t(f.Z),t(a.Z,{attrs:{cols:"3"}},[null!=e.turnos&&e.turnos.length>1?t(u.Z,{attrs:{items:e.turnos,"item-text":"name","item-value":"id"},model:{value:e.turnoSelecionado,callback:function(t){e.turnoSelecionado=t},expression:"turnoSelecionado"}}):e._e()],1)],1)]},proxy:!0},{key:"item.id_professor",fn:function(t){return[e._v(" "+e._s(e.professoresLookup[t.item.id_professor])+" ")]}},e._l(e.diasSemana,(function(i){return{key:`item.${i.id}`,fn:function(s){return[t(m.Z,{key:i.id,staticClass:"myInput",attrs:{type:"number",step:"1",min:"0","append-outer-icon":s.item[i.id].valor>0?s.item[i.id].obrigatorio?"mdi-exclamation-thick":"mdi-help":"mdi-blank",flat:"",dense:""},on:{change:e.changed,"click:append-outer":function(t){return e.setMandatory(s.item.id_professor,i.id,!s.item[i.id].obrigatorio)}},model:{value:s.item[i.id].valor,callback:function(t){e.$set(s.item[i.id],"valor",e._n(t))},expression:"props.item[dia.id].valor"}})]}}}))],null,!0)})],1),t(a.Z,[t(l.Z,{key:e.tabelasReload,staticClass:"tabela",attrs:{headers:e.headers,items:e.linhasLimitesDiarios,"hide-default-footer":"","disable-pagination":"","disable-filtering":"","disable-sort":"",dense:""},scopedSlots:e._u([{key:"top",fn:function(){return[t(h.Z,{attrs:{flat:""}},[t(p.qW,[e._v("Limites diários")]),t(d.Z,{staticClass:"ml-1",on:{click:function(t){e.dialogDeleteLimits=!0}}},[e._v("mdi-delete")]),t(f.Z)],1)]},proxy:!0},{key:"item.id_professor",fn:function(t){return[e._v(" "+e._s(e.professoresLookup[t.item.id_professor])+" ")]}},e._l(e.diasSemana,(function(i){return{key:`item.${i.id}`,fn:function(s){return[t(m.Z,{key:i.id,staticClass:"myInput",attrs:{type:"number",step:"1",min:"0",flat:"",dense:""},on:{change:e.changed},model:{value:s.item[i.id],callback:function(t){e.$set(s.item,i.id,e._n(t))},expression:"props.item[dia.id]"}})]}}}))],null,!0)})],1)],1),t(r.Z,{attrs:{"max-width":"500px"},model:{value:e.dialogDeleteMinimums,callback:function(t){e.dialogDeleteMinimums=t},expression:"dialogDeleteMinimums"}},[t(n.Z,[t(o.EB,{staticClass:"text-h6"},[e._v(" Limpar mínimos no turno selecionado? ")]),t(o.h7,[t(f.Z),t(s.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogDeleteMinimums=!1}}},[e._v("Cancelar")]),t(s.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.clearMinimums}},[e._v("OK")]),t(f.Z)],1)],1)],1),t(r.Z,{attrs:{"max-width":"500px"},model:{value:e.dialogDeleteLimits,callback:function(t){e.dialogDeleteLimits=t},expression:"dialogDeleteLimits"}},[t(n.Z,[t(o.EB,{staticClass:"text-h6"},[e._v(" Limpar limites diários? ")]),t(o.h7,[t(f.Z),t(s.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogDeleteLimits=!1}}},[e._v("Cancelar")]),t(s.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.clearLimits}},[e._v("OK")]),t(f.Z)],1)],1)],1)],1)},y=[],b=i(6125),v={name:"MinimosMaximos",props:["id"],mixins:[b.Z],data(){return{linhasMinimos:{},linhasLimitesDiarios:[],tabelasReload:0,dialogDeleteMinimums:!1,dialogDeleteLimits:!1}},mounted(){this.load()},computed:{headers(){return[{text:"Professor",value:"id_professor"}].concat(this.diasSemana.map((e=>({text:e.name,value:e.id}))).slice(0,this.numero_dias))}},methods:{async load(e=!1){try{this.setLoading(e),this.saved(),await this.getStructure();const t=await this.$axios.get("/limites/"+this.id),{minimos:i,limitesDiarios:s}=t.data,n={},o=[];this.turnos.forEach((e=>{const t=e.id;n[t]=[],this.professores.forEach((e=>{const i={id_professor:e.id};for(let t=0;t<this.numero_dias;t++)i[this.diasSemana[t].id]={valor:0,obrigatorio:!1};n[t].push(i)}))})),this.professores.forEach((e=>{const t={id_professor:e.id};for(let i=0;i<this.numero_dias;i++)t[this.diasSemana[i].id]=null;o.push(t)}));for(let e of i){const t=n[e.id_turno].find((t=>t.id_professor===e.id_professor))[e.dia];t.valor=e.valor,t.obrigatorio=1===e.obrigatorio}for(let e of s)o.find((t=>t.id_professor===e.id_professor))[e.dia]=e.valor;this.linhasMinimos=n,this.linhasLimitesDiarios=o,this.tabelasReload+=1}catch(t){console.error(t)}finally{this.clearLoading()}},async save(e=!0){const{linhasMinimos:t,linhasLimitesDiarios:i,id:s}=this,n=await this.$axios.post("/limites",{linhasMinimos:t,linhasLimitesDiarios:i,id:s});200===n.status&&e&&this.load(!0)},setMandatory(e,t,i){this.changed(),this.linhasMinimos[this.turnoSelecionado].find((t=>t.id_professor===e))[t].obrigatorio=i},clearMinimums(){this.changed(),this.dialogDeleteMinimums=!1;for(let e=0;e<this.linhasMinimos[this.turnoSelecionado].length;e++)for(const t in this.linhasMinimos[this.turnoSelecionado][e])"id_professor"!==t&&(this.linhasMinimos[this.turnoSelecionado][e][t]={obrigatorio:!1,valor:0})},clearLimits(){this.changed(),this.dialogDeleteLimits=!1;for(let e=0;e<this.linhasLimitesDiarios.length;e++)for(const t in this.linhasLimitesDiarios[e])"id_professor"!==t&&(this.linhasLimitesDiarios[e][t]=null)}}},_=v,k=i(3736),S=(0,k.Z)(_,g,y,!1,null,"7e3f99c5",null),Z=S.exports},4437:function(e,t,i){i(1884);var s=i(144),n=i(2653),o=i(1050);const a=["sm","md","lg","xl"],l=(()=>a.reduce(((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e)),{}))(),r=(()=>a.reduce(((e,t)=>(e["offset"+(0,o.jC)(t)]={type:[String,Number],default:null},e)),{}))(),d=(()=>a.reduce(((e,t)=>(e["order"+(0,o.jC)(t)]={type:[String,Number],default:null},e)),{}))(),c={col:Object.keys(l),offset:Object.keys(r),order:Object.keys(d)};function u(e,t,i){let s=e;if(null!=i&&!1!==i){if(t){const i=t.replace(e,"");s+=`-${i}`}return"col"!==e||""!==i&&!0!==i?(s+=`-${i}`,s.toLowerCase()):s.toLowerCase()}}const f=new Map;t["Z"]=s.ZP.extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...l,offset:{type:[String,Number],default:null},...r,order:{type:[String,Number],default:null},...d,alignSelf:{type:String,default:null,validator:e=>["auto","start","end","center","baseline","stretch"].includes(e)},tag:{type:String,default:"div"}},render(e,{props:t,data:i,children:s,parent:o}){let a="";for(const n in t)a+=String(t[n]);let l=f.get(a);if(!l){let e;for(e in l=[],c)c[e].forEach((i=>{const s=t[i],n=u(e,i,s);n&&l.push(n)}));const i=l.some((e=>e.startsWith("col-")));l.push({col:!i||!t.cols,[`col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),f.set(a,l)}return e(t.tag,(0,n.ZP)(i,{class:l}),s)}})},5294:function(e,t,i){i(1884);var s=i(144),n=i(2653),o=i(1050);const a=["sm","md","lg","xl"],l=["start","end","center"];function r(e,t){return a.reduce(((i,s)=>(i[e+(0,o.jC)(s)]=t(),i)),{})}const d=e=>[...l,"baseline","stretch"].includes(e),c=r("align",(()=>({type:String,default:null,validator:d}))),u=e=>[...l,"space-between","space-around"].includes(e),f=r("justify",(()=>({type:String,default:null,validator:u}))),m=e=>[...l,"space-between","space-around","stretch"].includes(e),h=r("alignContent",(()=>({type:String,default:null,validator:m}))),p={align:Object.keys(c),justify:Object.keys(f),alignContent:Object.keys(h)},g={align:"align",justify:"justify",alignContent:"align-content"};function y(e,t,i){let s=g[e];if(null!=i){if(t){const i=t.replace(e,"");s+=`-${i}`}return s+=`-${i}`,s.toLowerCase()}}const b=new Map;t["Z"]=s.ZP.extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:d},...c,justify:{type:String,default:null,validator:u},...f,alignContent:{type:String,default:null,validator:m},...h},render(e,{props:t,data:i,children:s}){let o="";for(const n in t)o+=String(t[n]);let a=b.get(o);if(!a){let e;for(e in a=[],p)p[e].forEach((i=>{const s=t[i],n=y(e,i,s);n&&a.push(n)}));a.push({"no-gutters":t.noGutters,"row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),b.set(o,a)}return e(t.tag,(0,n.ZP)(i,{staticClass:"row",class:a}),s)}})}}]);
//# sourceMappingURL=434.f6e5393b.js.map