"use strict";(self["webpackChunkhorario"]=self["webpackChunkhorario"]||[]).push([[717],{6511:function(t,e,s){s.r(e),s.d(e,{default:function(){return $}});var a=s(7179),i=s(3058),r=s(5223),n=s(4437),l=s(6035),o=s(9531),d=s(5452),u=s(6904),c=s(5057),f=s(5294),h=s(5234),m=s(5251),p=s(1002),g=s(2370),v=function(){var t=this,e=t._self._c;return e("div",[e(i.Z,{staticClass:"mx-auto mt-5",attrs:{"max-width":"1000px"}},[e(o.Z,{attrs:{headers:t.headers,items:t.items,"hide-default-footer":!0,"disable-pagination":"","disable-filtering":"","disable-sort":""},scopedSlots:t._u([{key:"top",fn:function(){return[e(p.Z,{attrs:{flat:""}},[e(g.qW,[t._v("Matérias")]),e(h.Z),e(d.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(a.Z,t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:"",disabled:t.locked}},"v-btn",i,!1),s),[t._v(" Nova matéria ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(i.Z,[e(r.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(r.ZB,[e(l.Z,[t.showDefaultSubjects?e(o.Z,{attrs:{items:t.defaultSubjects,headers:t.defaultSubjectHeaders,"item-key":"nome_materia_padrao","show-select":"","hide-default-footer":""},scopedSlots:t._u([{key:"top",fn:function(){return[e(p.Z,{attrs:{flat:""}},[e(g.qW,[t._v("Acrescentar Matérias Padrão")])],1)]},proxy:!0}],null,!1,433175343),model:{value:t.selectedDefaultSubjects,callback:function(e){t.selectedDefaultSubjects=e},expression:"selectedDefaultSubjects"}}):e(u.Z,{ref:"form",on:{submit:function(t){t.preventDefault()}}},[e(f.Z,[e(n.Z,{attrs:{cols:"12",sm:"6"}},[e(m.Z,{attrs:{label:"Nome da matéria",rules:[t.rules.required]},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1)],1)],1)],1)],1),e(r.h7,[e(h.Z),e(a.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancelar ")]),t.defaultSubjects.length?e(a.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.showDefaultSubjects=!t.showDefaultSubjects}}},[t._v(t._s(t.showDefaultSubjects?"Criar uma matéria diferente":"Ver matérias padrão"))]):t._e(),e(a.Z,{attrs:{color:"blue darken-1",text:"",disabled:t.showDefaultSubjects&&!t.selectedDefaultSubjects.length},on:{click:t.save}},[t._v(" OK ")])],1)],1)],1),e(d.Z,{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(i.Z,[e(r.EB,{staticClass:"text-h5"},[t._v("Tem certeza que deseja excluir essa matéria? ")]),e(r.h7,[e(h.Z),e(a.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancelar")]),e(a.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),e(h.Z)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:s}){return[e(c.Z,{staticClass:"mr-2",attrs:{small:"",disabled:t.locked},on:{click:function(e){return t.editItem(s)}}},[t._v(" mdi-pencil ")]),e(c.Z,{attrs:{small:"",disabled:t.locked},on:{click:function(e){return t.deleteItem(s)}}},[t._v(" mdi-delete ")])]}}])})],1)],1)},b=[],j=s(4916),S={name:"TabelaMatérias",props:["items","locked","materias"],mixins:[j.Z],data(){return{headers:[{text:"Nome",value:"name"},{text:"Ações",value:"actions",sortable:!1,width:"10%"}],defaultSubjectHeaders:[{text:"Nome",value:"nome_materia_padrao"}],selectedDefaultSubjects:[],defaultSubjects:[],showDefaultSubjects:!0,editedIndex:-1,editedItem:{name:""},defaultItem:{name:""},dialogDelete:!1,dialog:!1,formTitle:null}},watch:{dialog(t){t||this.close(),!0===t&&this.onOpen()},dialogDelete(t){t||this.closeDelete()}},mounted(){this.loadDefaultSubjects()},methods:{onOpen(){this.resetValidation(),this.selectedDefaultSubjects=[],!this.materias.length&&this.defaultSubjects.length?this.showDefaultSubjects=!0:this.showDefaultSubjects=!1},async loadDefaultSubjects(){const t=await this.$axios.get("/materias/padrao"),{materias:e}=t.data;e&&(this.defaultSubjects=e)},editItem(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0,this.showDefaultSubjects=!1},deleteItem(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm(){this.$emit("delete",this.editedIndex),this.closeDelete()},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},closeDelete(){this.dialogDelete=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},subjectExists(t){return null!=this.materias&&this.materias.length&&null!=this.materias.find((e=>e.name.trim()===t.name.trim()))},save(){if(this.showDefaultSubjects){if(!this.selectedDefaultSubjects.length)return;for(const t of this.selectedDefaultSubjects){const e={name:t.nome_materia_padrao},s=-1;this.subjectExists(e)||this.$emit("save",s,e)}this.close()}else{if(!this.validate())return;if(this.subjectExists(this.editedItem))return this.$toast.error("Já existe outra matéria com esse nome");this.$emit("save",this.editedIndex,this.editedItem),this.close()}}}},y=S,x=s(3736),Z=(0,x.Z)(y,v,b,!1,null,null,null),$=Z.exports},4192:function(t,e,s){s.d(e,{Z:function(){return i}});var a=s(3276),i=a.Z.extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render(t){let e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:{"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical,...this.themeClasses},attrs:{role:"separator","aria-orientation":e,...this.$attrs},on:this.$listeners})}})},6904:function(t,e,s){var a=s(4987),i=s(4609),r=s(380);e["Z"]=(0,a.Z)(i.Z,(0,r.J)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",(e=>{this.$set(this.errorBag,t._uid,e)}),{immediate:!0}),s={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?s.shouldValidate=t.$watch("shouldValidate",(a=>{a&&(this.errorBag.hasOwnProperty(t._uid)||(s.valid=e(t)))})):s.valid=e(t),s},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find((e=>e._uid===t._uid));if(!e)return;const s=this.watchers.find((t=>t._uid===e._uid));s&&(s.valid(),s.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==e._uid)),this.inputs=this.inputs.filter((t=>t._uid!==e._uid)),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},4437:function(t,e,s){s(1884);var a=s(144),i=s(2653),r=s(1050);const n=["sm","md","lg","xl"],l=(()=>n.reduce(((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t)),{}))(),o=(()=>n.reduce(((t,e)=>(t["offset"+(0,r.jC)(e)]={type:[String,Number],default:null},t)),{}))(),d=(()=>n.reduce(((t,e)=>(t["order"+(0,r.jC)(e)]={type:[String,Number],default:null},t)),{}))(),u={col:Object.keys(l),offset:Object.keys(o),order:Object.keys(d)};function c(t,e,s){let a=t;if(null!=s&&!1!==s){if(e){const s=e.replace(t,"");a+=`-${s}`}return"col"!==t||""!==s&&!0!==s?(a+=`-${s}`,a.toLowerCase()):a.toLowerCase()}}const f=new Map;e["Z"]=a.ZP.extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...l,offset:{type:[String,Number],default:null},...o,order:{type:[String,Number],default:null},...d,alignSelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)},tag:{type:String,default:"div"}},render(t,{props:e,data:s,children:a,parent:r}){let n="";for(const i in e)n+=String(e[i]);let l=f.get(n);if(!l){let t;for(t in l=[],u)u[t].forEach((s=>{const a=e[s],i=c(t,s,a);i&&l.push(i)}));const s=l.some((t=>t.startsWith("col-")));l.push({col:!s||!e.cols,[`col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),f.set(n,l)}return t(e.tag,(0,i.ZP)(s,{class:l}),a)}})},6035:function(t,e,s){s.d(e,{Z:function(){return n}});s(9027),s(1884);var a=s(144);function i(t){return a.ZP.extend({name:`v-${t}`,functional:!0,props:{id:String,tag:{type:String,default:"div"}},render(e,{props:s,data:a,children:i}){a.staticClass=`${t} ${a.staticClass||""}`.trim();const{attrs:r}=a;if(r){a.attrs={};const t=Object.keys(r).filter((t=>{if("slot"===t)return!1;const e=r[t];return t.startsWith("data-")?(a.attrs[t]=e,!1):e||"string"===typeof e}));t.length&&(a.staticClass+=` ${t.join(" ")}`)}return s.id&&(a.domProps=a.domProps||{},a.domProps.id=s.id),e(s.tag,a,i)}})}var r=s(2653),n=i("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render(t,{props:e,data:s,children:a}){let i;const{attrs:n}=s;return n&&(s.attrs={},i=Object.keys(n).filter((t=>{if("slot"===t)return!1;const e=n[t];return t.startsWith("data-")?(s.attrs[t]=e,!1):e||"string"===typeof e}))),e.id&&(s.domProps=s.domProps||{},s.domProps.id=e.id),t(e.tag,(0,r.ZP)(s,{staticClass:"container",class:Array({"container--fluid":e.fluid}).concat(i||[])}),a)}})},5294:function(t,e,s){s(1884);var a=s(144),i=s(2653),r=s(1050);const n=["sm","md","lg","xl"],l=["start","end","center"];function o(t,e){return n.reduce(((s,a)=>(s[t+(0,r.jC)(a)]=e(),s)),{})}const d=t=>[...l,"baseline","stretch"].includes(t),u=o("align",(()=>({type:String,default:null,validator:d}))),c=t=>[...l,"space-between","space-around"].includes(t),f=o("justify",(()=>({type:String,default:null,validator:c}))),h=t=>[...l,"space-between","space-around","stretch"].includes(t),m=o("alignContent",(()=>({type:String,default:null,validator:h}))),p={align:Object.keys(u),justify:Object.keys(f),alignContent:Object.keys(m)},g={align:"align",justify:"justify",alignContent:"align-content"};function v(t,e,s){let a=g[t];if(null!=s){if(e){const s=e.replace(t,"");a+=`-${s}`}return a+=`-${s}`,a.toLowerCase()}}const b=new Map;e["Z"]=a.ZP.extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:d},...u,justify:{type:String,default:null,validator:c},...f,alignContent:{type:String,default:null,validator:h},...m},render(t,{props:e,data:s,children:a}){let r="";for(const i in e)r+=String(e[i]);let n=b.get(r);if(!n){let t;for(t in n=[],p)p[t].forEach((s=>{const a=e[s],i=v(t,s,a);i&&n.push(i)}));n.push({"no-gutters":e.noGutters,"row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),b.set(r,n)}return t(e.tag,(0,i.ZP)(s,{staticClass:"row",class:n}),a)}})},4916:function(t,e){function s(t){return null==t||0===String(t).trim().length}e["Z"]={data(){return{rules:{required:t=>null!=t&&String(t).trim().length>0||"Obrigatório",greaterThanZero:t=>e=>s(e)?!0!==t||"Deve ser um número maior que zero":/^[1-9]\d*$/.test(e)||"Deve ser um número maior que zero",greaterOrEqualThanZero:t=>{if(null==t)return"Deve ser um número maior ou igual a zero";const e=parseInt(t,10);return Number.isInteger(e)&&e>=0||"Deve ser um número maior ou igual a zero"},lessThanOrEqual:(t,e)=>a=>{if(s(a))return!0!==e||"Deve ser um número menor ou igual a "+t;const i=parseInt(a,10);return Number.isInteger(i)&&i<=t||"Deve ser um número menor ou igual a "+t}}}},methods:{resetValidation(t){null!=t&&null!=this.$refs[t]?this.$refs[t].resetValidation():null!=this.$refs.form&&this.$refs.form.resetValidation()},validate(t){return null!=t&&null!=this.$refs[t]?this.$refs[t].validate():null!=this.$refs.form?this.$refs.form.validate():void 0}}}},1884:function(){}}]);
//# sourceMappingURL=717.b3bd995a.js.map