"use strict";(self["webpackChunkhorario"]=self["webpackChunkhorario"]||[]).push([[376],{8376:function(t,e,s){s.r(e),s.d(e,{default:function(){return x}});var a=s(7179),o=s(3058),r=s(5223),i=s(5234),n=s(5617),l=s(1002),u=s(2370),h=function(){var t=this,e=t._self._c;return e("div",[t.temHorarios?e(o.Z,{staticClass:"mx-auto mt-5",attrs:{"max-width":"1000px"}},[e(l.Z,{attrs:{flat:""}},[e(u.qW,[t._v("Alterações na estrutura bloqueadas, pois a configuração já tem grades geradas")]),e(i.Z),e(a.Z,{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){return t.$emit("navigate",7)}}},[t._v(" Gerenciar grades ")])],1)],1):t._e(),e(o.Z,{staticClass:"mx-auto mt-5",attrs:{"max-width":"1000px"}},[e(l.Z,{attrs:{flat:""}},[e(u.qW,[t._v("Observações")]),e(i.Z),null==t.observacao?e(a.Z,{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){t.observacao=""}}},[t._v(" Adicionar observação ")]):t._e()],1),null!=t.observacao?e(r.ZB,[e(n.Z,{attrs:{label:"Observações","auto-grow":"",clearable:"",rows:"1",spellcheck:"false"},on:{change:t.changed},model:{value:t.observacao,callback:function(e){t.observacao=e},expression:"observacao"}})],1):t._e()],1),e("tabela-materias",{attrs:{items:t.materias,locked:t.temHorarios,materias:t.materias},on:{delete:t.deleteMateria,save:t.saveMateria}}),e("tabela-professores",{attrs:{items:t.professores,"numero-dias":t.numero_dias,locked:t.temHorarios},on:{delete:t.deleteProfessor,save:t.saveProfessor}}),e("tabela-turnos",{attrs:{items:t.turnos,locked:t.temHorarios},on:{delete:t.deleteTurno,save:t.saveTurno}}),e(o.Z,{staticClass:"mx-auto mt-5",attrs:{"max-width":"1000px"}},[e("tabela-salas",{attrs:{_turnos:t.turnos,_salas:t.salas,turnoSelecionado:t.turnoSelecionado,locked:t.temHorarios},on:{delete:t.deleteSala,save:t.saveSala}})],1)],1)},c=[],d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function m(t){return"string"===typeof t&&d.test(t)}var p=m,f=s(7632),g=s(6125),v={name:"ConfiguracoesHorario",mixins:[g.Z],components:{TabelaTurnos:()=>Promise.all([s.e(531),s.e(452),s.e(567)]).then(s.bind(s,9905)),TabelaProfessores:()=>Promise.all([s.e(531),s.e(452),s.e(533)]).then(s.bind(s,501)),TabelaSalas:()=>Promise.all([s.e(531),s.e(452),s.e(656)]).then(s.bind(s,9323)),TabelaMaterias:()=>Promise.all([s.e(531),s.e(452),s.e(717)]).then(s.bind(s,6511))},props:["id"],data(){return{turnos:[],salas:[],materias:[],professores:[],tabelasReload:0,temHorarios:!1,observacao:null}},watch:{turnos(){null==this.turnoSelecionado&&this.turnos.length>0&&(this.turnoSelecionado=this.turnos[0].id)},observacao(t,e){null==t&&null!=e&&this.changed()}},mounted(){this.load()},methods:{async load(t=!1){if(this.id)try{this.setLoading(t),this.saved();const e=await this.$axios.get("/configuracao/"+this.id),{turnos:s,salas:a,professores:o,materias:r,configuracao:i,temHorarios:n}=e.data;this.turnos=s,this.salas=a,this.professores=o,this.materias=r,this.numero_dias=i.numero_dias,this.temHorarios=n,this.observacao=e.data.configuracao.observacao,null!=s&&s.length>0&&(null==this.turnoSelecionado||p(this.turnoSelecionado))&&(this.turnoSelecionado=s[0].id)}catch(e){console.error(e)}finally{this.clearLoading()}},save(t=!0){const{turnos:e,salas:s,professores:a,materias:o}=this;let r=null!=this.observacao?this.observacao.trim():null;null!=r&&0===r.length&&(r=null),this.$axios.post("/configuracao",{turnos:e,salas:s,professores:a,id_configuracao:this.id,materias:o,observacao:r}).then((e=>{200===e.status&&t&&this.load(!0)})).catch((t=>console.log(t)))},getTurnoIdByName(t){return this.turnos.find((e=>e.name===t)).id},deleteTurno(t){this.changed();const{id:e}=this.turnos[t];this.turnos.splice(t,1),this.salas=this.salas.filter((t=>t.turno!==e))},saveTurno(t,e){-1===t?(e.id=(0,f.Z)(),this.turnos.push(e),this.changed()):(this.checkChanges(this.turnos[t],e),Object.assign(this.turnos[t],e))},deleteSala(t,e){this.changed(),this.salas=this.salas.filter((s=>!(s.turno===t&&s.name===e)))},saveSala(t,e){if(void 0===t)this.changed(),this.salas.push(e);else{const s=this.salas.findIndex((e=>e.name===t));this.checkChanges(this.salas[s],e),this.salas.splice(s,1,e)}},deleteProfessor(t){const e=this.professores[t].name;this.professores.splice(t,1),this.changed(),this.turnos.forEach((t=>{delete this.linhasAulas[t.name][e],delete this.linhasMaterias[t.name][e]}))},saveProfessor(t,e){-1===t?(e.uuid=(0,f.Z)(),this.professores.push(e),this.changed()):(this.checkChanges(this.professores[t],e),Object.assign(this.professores[t],e))},deleteMateria(t){this.materias.splice(t,1),this.changed()},saveMateria(t,e){-1===t?(e.uuid=(0,f.Z)(),this.materias.push(e),this.changed()):(this.checkChanges(this.materias[t],e),Object.assign(this.materias[t],e))}}},b=v,w=s(3736),y=(0,w.Z)(b,h,c,!1,null,null,null),x=y.exports},5617:function(t,e,s){s.d(e,{Z:function(){return i}});var a=s(5251),o=s(4987);const r=(0,o.Z)(a.Z);var i=r.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...a.Z.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick((()=>{var e;t?this.calculateInputHeight():null===(e=this.$refs.input)||void 0===e||e.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,s=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(s,e)+"px"},genInput(){const t=a.Z.options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){a.Z.options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})},7632:function(t,e,s){s.d(e,{Z:function(){return c}});const a="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var o={randomUUID:a};let r;const i=new Uint8Array(16);function n(){if(!r&&(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}const l=[];for(let d=0;d<256;++d)l.push((d+256).toString(16).slice(1));function u(t,e=0){return(l[t[e+0]]+l[t[e+1]]+l[t[e+2]]+l[t[e+3]]+"-"+l[t[e+4]]+l[t[e+5]]+"-"+l[t[e+6]]+l[t[e+7]]+"-"+l[t[e+8]]+l[t[e+9]]+"-"+l[t[e+10]]+l[t[e+11]]+l[t[e+12]]+l[t[e+13]]+l[t[e+14]]+l[t[e+15]]).toLowerCase()}function h(t,e,s){if(o.randomUUID&&!e&&!t)return o.randomUUID();t=t||{};const a=t.random||(t.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e){s=s||0;for(let t=0;t<16;++t)e[s+t]=a[t];return e}return u(a)}var c=h}}]);
//# sourceMappingURL=376.17079ca6.js.map