"use strict";(self["webpackChunkhorario"]=self["webpackChunkhorario"]||[]).push([[937],{9937:function(t,e,i){i.r(e),i.d(e,{default:function(){return C}});var r=i(7179),s=i(3058),a=i(5223),o=i(4437),l=i(6035),n=i(9531),c=i(5452),d=i(6904),h=i(5057),u=i(248),m=i(1908),g=i(2630),p=i(92),v=i(6275),f=i(5294),_=i(4544),x=i(5234),S=i(5251),k=i(1002),Z=i(2370),b=i(3432),F=function(){var t=this,e=t._self._c;return e("div",[e(n.Z,{attrs:{headers:t.headers,items:t.horarios,"item-class":t.itemRowBackground,"multi-sort":"",dense:"","footer-props":{"items-per-page-options":[5,10,25,{text:"Todos",value:-1}],"show-current-page":!0,"show-items-per-page":!0,"show-first-last-page":!0,"items-per-page-text":"Linhas por página:","items-per-page-all":"Todos","page-text":"{0}-{1} de {2}"},loading:t.$store.getters.loading,"loading-text":"Carregando horários","no-data-text":"Nenhum horário encontrado"},scopedSlots:t._u([{key:"top",fn:function(){return[e(k.Z,{attrs:{flat:"",dense:""}},[e(Z.qW,[t._v(t._s(t.toolbarTitle))]),e(x.Z),e(b.Z,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(r.Z,t._g({attrs:{text:"",tile:"",medium:"",color:"primary"},on:{click:t.load}},i),[e(h.Z,[t._v("mdi-refresh ")])],1)]}}])},[e("span",[t._v("Recarregar")])]),e(p.Z,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(r.Z,t._g({attrs:{icon:""}},i),[e(h.Z,[t._v("mdi-dots-vertical")])],1)]}}])},[e(u.Z,t._l(t.menuOptions,(function(i){return e(m.Z,{key:i.value,on:{click:function(t){return i.action()}}},[e(g.V9,[t._v(t._s(i.text))])],1)})),1)],1),e(r.Z,{staticClass:"mr-2",attrs:{color:"primary",dark:""},on:{click:t.openSavedFiltersDialog}},[t._v(" Filtrar ")]),t.showSpinner?e(b.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(r.Z,t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){t.cancelGenerationDialog=!0}}},i),[[e(v.Z,{attrs:{indeterminate:0===t.bestProgress,value:t.bestProgress.toString(),size:20,width:3}})]],2)]}}],null,!1,3057719100)},[e("span",[t._v("Clique para cancelar")])]):e(r.Z,{attrs:{color:"primary",dark:""},on:{click:t.generate}},[t._v(" Gerar ")])],1),e("div",{staticClass:"mb-15"},t._l(t.filters,(function(i,r){return e(f.Z,{key:r,staticStyle:{height:"60px",padding:"20px"}},[e(o.Z,{attrs:{cols:"5"}},[e(_.Z,{attrs:{items:t.metrics,"item-text":"desc_metrica","item-value":"id_metrica_qualidade","hide-details":"",label:"Métrica"},model:{value:i.id_metrica_qualidade,callback:function(e){t.$set(i,"id_metrica_qualidade",e)},expression:"filter.id_metrica_qualidade"}})],1),e(o.Z,{attrs:{cols:"3"}},[e(_.Z,{attrs:{items:t.professores,"item-text":"name","item-value":"id","hide-details":"",label:"Professor",disabled:!t.isTeacherFilterEnabled(i.id_metrica_qualidade),clearable:""},model:{value:i.id_professor,callback:function(e){t.$set(i,"id_professor",e)},expression:"filter.id_professor"}})],1),e(o.Z,{attrs:{cols:"2"}},[e(_.Z,{attrs:{items:t.opcoesRegras,"hide-details":"",label:"Regra","item-text":"text","item-value":"id"},model:{value:i.regra,callback:function(e){t.$set(i,"regra",e)},expression:"filter.regra"}})],1),e(o.Z,{attrs:{cols:"2"}},[e(S.Z,{attrs:{"hide-detais":"",label:"Valor"},model:{value:i.valor,callback:function(e){t.$set(i,"valor",e)},expression:"filter.valor"}},[e("template",{slot:"append-outer"},[e(h.Z,{on:{click:function(e){return t.deleteFilter(r)}}},[t._v("mdi-delete")]),r===t.filters.length-1?e(h.Z,{on:{click:t.addFilter}},[t._v("mdi-plus")]):t._e()],1)],2)],1)],1)})),1)]},proxy:!0},{key:"item.data_hora_geracao",fn:function(e){return[t._v(" "+t._s(new Date(e.item.data_hora_geracao).toLocaleString("pt-BR"))+" ")]}},{key:"item.icon",fn:function({item:i}){return[i.hard_constraints_cost>0?e(h.Z,{attrs:{small:"",color:"red"}},[t._v(" mdi-alert ")]):t._e()]}},{key:"item.actions",fn:function({item:i}){return[e(h.Z,{staticClass:"mr-2",attrs:{small:"",color:i.id_horario===t.$store.state.selectedSchedule?"primary":null},on:{click:function(e){return t.viewSchedule(i.id_horario)}}},[t._v(" mdi-eye ")]),e(h.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.deleteSchedule(i)}}},[t._v(" mdi-delete ")])]}}])}),e(c.Z,{attrs:{"max-width":"600px"},model:{value:t.deleteScheduleDialog,callback:function(e){t.deleteScheduleDialog=e},expression:"deleteScheduleDialog"}},[e(s.Z,[e(a.EB,{staticClass:"text-h5"},[t._v(t._s(t.deleteScheduleDialogTitle))]),e(a.h7,[e(x.Z),e(r.Z,{attrs:{color:"blue darken-1",text:"",disabled:t.loading},on:{click:t.closeDeleteScheduleDialog}},[t._v("Cancelar")]),e(r.Z,{attrs:{color:"blue darken-1",text:"",loading:t.loading},on:{click:t.deleteScheduleConfirm}},[t._v("OK")]),e(x.Z)],1)],1)],1),e(c.Z,{attrs:{"max-width":"700px"},model:{value:t.cancelGenerationDialog,callback:function(e){t.cancelGenerationDialog=e},expression:"cancelGenerationDialog"}},[e(s.Z,[e(a.EB,{staticClass:"text-h5"},[t._v("Deseja mesmo cancelar a geração da grade horária?")]),e(a.h7,[e(x.Z),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.cancelGenerationDialog=!1}}},[t._v("Não")]),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.cancelGenerationConfirm}},[t._v("Sim, parar geração")]),e(x.Z)],1)],1)],1),e(c.Z,{attrs:{"max-width":"700px"},model:{value:t.saveFiltersDialog,callback:function(e){t.saveFiltersDialog=e},expression:"saveFiltersDialog"}},[e(s.Z,[e(a.EB,{staticClass:"text-h5"},[t._v(t._s(t.saveFiltersDialogTitle))]),e(a.ZB,[e(l.Z,[null==t.currentFilterGroup||t.currentFilterGroup.id_filtro_horario?t._e():e(d.Z,{ref:"form",on:{submit:function(t){t.preventDefault()}}},[e(f.Z,[e(o.Z,{attrs:{cols:"12",sm:"6"}},[e(S.Z,{attrs:{label:"Nome do filtro",rules:[t.rules.required]},model:{value:t.currentFilterGroup.desc_filtro_horario,callback:function(e){t.$set(t.currentFilterGroup,"desc_filtro_horario",e)},expression:"currentFilterGroup.desc_filtro_horario"}})],1)],1)],1)],1)],1),e(a.h7,[e(x.Z),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.cancelSaveFilters}},[t._v("Cancelar")]),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.saveFilters}},[t._v("Salvar")]),e(x.Z)],1)],1)],1),e(c.Z,{attrs:{"max-width":"700px"},model:{value:t.savedFiltersDialog,callback:function(e){t.savedFiltersDialog=e},expression:"savedFiltersDialog"}},[e(s.Z,[e(a.EB,{staticClass:"text-h5"},[t._v("Filtros Salvos")]),e(a.ZB,[e(l.Z,[e(n.Z,{attrs:{items:t.filterGroups,headers:t.savedFiltersHeaders,"hide-default-footer":""},scopedSlots:t._u([{key:"item.actions",fn:function({item:i}){return[e(r.Z,{attrs:{color:"primary",dark:"",outlined:""},on:{click:function(e){return t.useSavedFilter(i)}}},[t._v(" Aplicar ")])]}}])})],1)],1),e(a.h7,[e(x.Z),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.savedFiltersDialog=!1}}},[t._v("Cancelar")]),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.addFilter}},[t._v("Novo filtro")]),e(x.Z)],1)],1)],1),e(c.Z,{attrs:{"max-width":"700px"},model:{value:t.headerSelectionDialog,callback:function(e){t.headerSelectionDialog=e},expression:"headerSelectionDialog"}},[e(s.Z,[e(a.EB,{staticClass:"text-h5"},[t._v("Customizar colunas")]),e(a.ZB,[e(n.Z,{attrs:{items:t.availableHeaders,headers:t.customColumnsHeaders,"show-select":"","item-key":"value","disable-pagination":"",dense:""},model:{value:t.selectedHeadersEdit,callback:function(e){t.selectedHeadersEdit=e},expression:"selectedHeadersEdit"}})],1),e(a.h7,[e(x.Z),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.headerSelectionDialog=!1}}},[t._v("Cancelar")]),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.customizeHeaders}},[t._v("Salvar")]),e(x.Z)],1)],1)],1)],1)},w=[],y=i(6125),D=i(4916),G={name:"ListaHorarios",props:["id"],mixins:[y.Z,D.Z],data(){return{horarios:[],workers:[],showInvalid:!1,bestProgress:0,customColumnsHeaders:[{text:"Nome",value:"text"}],savedFiltersHeaders:[{text:"Nome",value:"desc_filtro_horario"},{value:"actions",align:"end"}],availableHeaders:[],interval:null,deletingInvalid:null,deletingScheduleId:null,deleteScheduleDialog:!1,cancelGenerationDialog:!1,loading:!1,selectedHeadersEdit:[],selectedHeaders:[],headerSelectionDialog:!1,selection:[],requestingGenerationTimeout:null,cancelingGenerationTimeout:null,filters:[],metrics:[],opcoesRegras:[{text:"Exatamente",id:0},{text:"No mínimo",id:1},{text:"No máximo",id:2}],saveFiltersDialog:!1,currentFilterGroup:null,savedFiltersDialog:!1,filterGroups:null}},async mounted(){this.load(),await this.loadAvailableMetrics(),this.loadCustomHeaders(),this.getStructure()},computed:{showSpinner(){return!this.cancelingGenerationTimeout&&(null!=this.requestingGenerationTimeout||this.workers.length>0)},headers(){const t=[{text:"",value:"icon",sortable:!1}],e=[{text:"Ações",value:"actions",sortable:!1,width:"90px"}];return e.concat(t).concat(this.selectedHeaders)},menuOptions(){const t=[{text:this.showInvalid?"Esconder horários inválidos":"Mostrar horários inválidos",key:"show-invalid",action:()=>this.showInvalid=!this.showInvalid},{text:"Excluir horários inválidos",key:"delete-invalid",action:()=>this.deleteSchedules(!0)},{text:"Excluir todos horários",key:"delete-all",action:this.deleteSchedules},{text:"Editar configurações de geração",key:"delete-all",action:()=>this.$emit("open-dialog")},{text:"Editar colunas",key:"edit-columns",action:this.openCustomizeHeaders}];return(this.filters.length||null!=this.currentFilterGroup&&this.currentFilterGroup.id_filtro_horario)&&t.push({text:"Limpar filtros",key:"edit-columns",action:this.clearFilters}),this.processFilters().length&&t.push({text:"Salvar filtros",key:"save-filters",action:()=>{this.saveFiltersDialog=!0}}),t},deleteScheduleDialogTitle(){return!0===this.deletingInvalid?"Deseja mesmo excluir todos os horários inválidos?":null!=this.deletingScheduleId?"Deseja mesmo excluir esse horário?":"Deseja mesmo excluir todos os horários?"},saveFiltersDialogTitle(){return null!=this.currentFilterGroup&&null!=this.currentFilterGroup.id_filtro_horario?`Salvar filtros atuais como ${this.currentFilterGroup.desc_filtro_horario} ?`:"Salvar filtros atuais"},toolbarTitle(){return this.currentFilterGroup&&this.currentFilterGroup.desc_filtro_horario?"Horários Gerados (Filtro "+this.currentFilterGroup.desc_filtro_horario+")":"Horários Gerados"}},methods:{async load(t=!0){try{t&&this.setLoading();const e=await this.$axios.post("/horario",{id_configuracao:this.id,filters:this.processFilters()}),i=await this.$axios.get("/generation/workers",{params:{id_configuracao:this.id}});if(200===i.status){null!=this.requestingGenerationTimeout&&(clearTimeout(this.requestingGenerationTimeout),this.requestingGenerationTimeout=null),this.workers=i.data.workers,this.setBestProgress();for(const t of i.data.workers){let e=null,i=null;null!=t.validationError&&t.validationError.length?e=t.validationError.trim():"error"===t.status?e="Ocorreu um erro inesperado durante a geração da grade horária":null!=t.message&&t.message.trim().length>0&&(i=t.message),null!=e&&(this.$toast.error(e,{timeout:5e3}),this.workers=[],this.stopInterval(),this.cancelWorker(t.id,!0)),null!=i&&(this.$toast.warning(i,{timeout:5e3}),this.workers=[],this.stopInterval(),this.cancelWorker(t.id,!0))}}if(this.horarios=e.data.horarios,null!=e.data.horarios&&e.data.horarios.length){const t=this.getSchedule(this.$store.state.selectedSchedule),i=e.data.horarios[0];null==t&&this.viewSchedule(i.id_horario)}}catch(e){console.error(e)}finally{this.clearLoading()}},loadCustomHeaders(){const t=localStorage.getItem("customHeaders");if(null!=t){const e=JSON.parse(t);this.selectedHeaders=this.availableHeaders.filter((t=>e.includes(t.value)))}else this.setDefaultHeaders()},openCustomizeHeaders(){this.selectedHeadersEdit=[...this.selectedHeaders],this.headerSelectionDialog=!0},customizeHeaders(){this.selectedHeaders=[...this.selectedHeadersEdit],this.headerSelectionDialog=!1;const t=JSON.stringify(this.selectedHeadersEdit.map((t=>t.value)));localStorage.setItem("customHeaders",t)},getSchedule(t){return this.horarios.find((e=>e.id_horario===t))},viewSchedule(t){this.$store.dispatch("setSelectedSchedule",t)},setBestProgress(){if(null==this.workers||0===this.workers.length)return 0;this.bestProgress=Math.max(...Array.from(this.workers,(t=>t.progress)))},deleteSchedules(t=!1){this.deletingInvalid=t,this.deletingScheduleId=null,this.deleteScheduleDialog=!0},closeDeleteScheduleDialog(){this.deletingInvalid=null,this.deletingScheduleId=null,this.deleteScheduleDialog=!1},async deleteScheduleConfirm(){if(null!=this.deletingScheduleId){this.loading=!0;try{await this.$axios.delete("/horario",{data:{id_configuracao:this.id,id_horario:this.deletingScheduleId}})}catch(t){console.error(t)}finally{this.loading=!1}}else{this.loading=!0;try{await this.$axios.delete("/horario",{data:{id_configuracao:this.id,invalido:this.deletingInvalid}})}catch(t){console.error(t)}finally{this.loading=!1}}this.load(),this.closeDeleteScheduleDialog()},async deleteSchedule(t){this.deleteScheduleDialog=!0,this.deletingScheduleId=t.id_horario},startInterval(){null===this.interval&&(this.interval=setInterval((()=>this.load(!1)),5e3))},stopInterval(){this.interval&&(clearInterval(this.interval),this.interval=null)},cancelWorker(t,e){return this.bestProgress=0,this.$axios.post("/generation/cancel",{id_configuracao:this.id,worker_id:t,suppressMessage:e})},itemRowBackground:function(t){return t.hard_constraints_cost>0?"invalid":null},async generate(){this.requestingGenerationTimeout=setTimeout((()=>this.requestingGenerationTimeout=null),5e3);const t=await this.$axios.post("/command/generate/",null,{params:{id_configuracao:this.id}});200===t.status&&(setTimeout(this.load,100),this.startInterval())},async cancelGenerationConfirm(){this.cancelGenerationDialog=!1,this.bestProgress=0,this.cancelingGenerationTimeout=setTimeout((()=>this.cancelingGenerationTimeout=null),5e3);const t=await this.$axios.post("/generation/cancel",{id_configuracao:this.id});clearTimeout(this.cancelingGenerationTimeout),this.cancelingGenerationTimeout=null,200===t.status&&(this.load(),this.stopInterval())},getCurrentScheduleIndex(){const t=this.$store.state.selectedSchedule;return this.horarios.findIndex((e=>e.id_horario===t))},nextSchedule(){const t=this.getCurrentScheduleIndex(),e=this.horarios[t+1];e&&this.$store.dispatch("setSelectedSchedule",e.id_horario)},previousSchedule(){const t=this.getCurrentScheduleIndex(),e=this.horarios[t-1];e&&this.$store.dispatch("setSelectedSchedule",e.id_horario)},setDefaultHeaders(){const t=["id_horario","hard_constraints_cost","soft_constraints_cost"];this.selectedHeaders=this.availableHeaders.filter((e=>t.includes(e.value)))},async loadAvailableMetrics(){const t=await this.$axios.get("/configuracoes_geracao/metrics"),e=[{text:"Identificador",value:"id_horario"},{text:"Problemas",value:"hard_constraints_cost"},{text:"Detalhes",value:"soft_constraints_cost"},{text:"Observações",value:"observacao"}];t.data.metrics&&(this.metrics=t.data.metrics.filter((t=>1===Number(t.filtravel))),this.availableHeaders=e.concat(t.data.metrics.map((t=>({text:t.desc_metrica,value:t.chave_xml.toLowerCase()})))))},getEmptyFilter(){return{id_professor:null,id_metrica_qualidade:null,valor:null,regra:0}},addFilter(){null!=this.currentFilterGroup&&null!=this.currentFilterGroup.id_filtro_horario&&this.clearFilters(),this.filters.push(this.getEmptyFilter()),null==this.currentFilterGroup&&(this.currentFilterGroup={desc_filtro_horario:null}),this.savedFiltersDialog=!1},deleteFilter(t){this.filters.splice(t,1)},isTeacherFilterEnabled(t){const e=this.metrics.find((e=>e.id_metrica_qualidade===t));return null!=e&&1===Number(e.tem_professor)},processFilters(){return this.filters.filter((t=>null!=t.id_metrica_qualidade&&null!=t.valor&&0!==String(t.valor).trim().length)).map((t=>(this.isTeacherFilterEnabled(t.id_metrica_qualidade)||delete t.id_professor,t)))},cancelSaveFilters(){this.saveFiltersDialog=!1},async saveFilters(){const t=this.processFilters();if(!t.length)return;const e=JSON.stringify(t),i={id_configuracao:this.id,definicao:e,desc_filtro_horario:this.currentFilterGroup.desc_filtro_horario};null!=this.currentFilterGroup&&this.currentFilterGroup.id_filtro_horario&&(i.id_filtro_horario=this.currentFilterGroup.id_filtro_horario),await this.$axios.post("/filter/save",i),await this.loadFilterGroups(),this.saveFiltersDialog=!1},async openSavedFiltersDialog(){null==this.filterGroups&&await this.loadFilterGroups(),this.filterGroups.length?this.savedFiltersDialog=!0:this.addFilter()},async loadFilterGroups(){const t=await this.$axios.post("filter/get",{id_configuracao:this.id});this.filterGroups=t.data.filtros},useSavedFilter(t){this.currentFilterGroup=t,this.filters=[...t.definicao],this.savedFiltersDialog=!1,this.load(!0)},clearFilters(){this.currentFilterGroup=null,this.filters=[]}}},$=G,I=i(3736),T=(0,I.Z)($,F,w,!1,null,null,null),C=T.exports},6904:function(t,e,i){var r=i(4987),s=i(4609),a=i(380);e["Z"]=(0,r.Z)(s.Z,(0,a.J)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",(e=>{this.$set(this.errorBag,t._uid,e)}),{immediate:!0}),i={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",(r=>{r&&(this.errorBag.hasOwnProperty(t._uid)||(i.valid=e(t)))})):i.valid=e(t),i},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find((e=>e._uid===t._uid));if(!e)return;const i=this.watchers.find((t=>t._uid===e._uid));i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==e._uid)),this.inputs=this.inputs.filter((t=>t._uid!==e._uid)),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},3432:function(t,e,i){i.d(e,{Z:function(){return h}});var r=i(5840),s=i(8914),a=i(4019),o=i(2524),l=i(7482),n=i(1050),c=i(6596),d=i(4987),h=(0,d.Z)(s.Z,a.Z,o.Z,l.Z).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},openOnFocus:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:()=>({calculatedMinWidth:0,closeDependents:!1}),computed:{calculatedLeft(){const{activator:t,content:e}=this.dimensions,i=!this.bottom&&!this.left&&!this.top&&!this.right,r=!1!==this.attach?t.offsetLeft:t.left;let s=0;return this.top||this.bottom||i?s=r+t.width/2-e.width/2:(this.left||this.right)&&(s=r+(this.right?t.width:-e.width)+(this.right?10:-10)),this.nudgeLeft&&(s-=parseInt(this.nudgeLeft)),this.nudgeRight&&(s+=parseInt(this.nudgeRight)),`${this.calcXOverflow(s,this.dimensions.content.width)}px`},calculatedTop(){const{activator:t,content:e}=this.dimensions,i=!1!==this.attach?t.offsetTop:t.top;let r=0;return this.top||this.bottom?r=i+(this.bottom?t.height:-e.height)+(this.bottom?10:-10):(this.left||this.right)&&(r=i+t.height/2-e.height/2),this.nudgeTop&&(r-=parseInt(this.nudgeTop)),this.nudgeBottom&&(r+=parseInt(this.nudgeBottom)),!1===this.attach&&(r+=this.pageYOffset),`${this.calcYOverflow(r)}px`},classes(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY(){return this.top||this.bottom},offsetX(){return this.left||this.right},styles(){return{left:this.calculatedLeft,maxWidth:(0,n.kb)(this.maxWidth),minWidth:(0,n.kb)(this.minWidth),top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount(){this.$nextTick((()=>{this.value&&this.callActivate()}))},mounted(){"v-slot"===(0,n.sp)(this,"activator",!0)&&(0,c.N6)("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate(){this.runDelay("close")},genActivatorListeners(){const t=r.Z.options.methods.genActivatorListeners.call(this);return this.openOnFocus&&(t.focus=t=>{this.getActivator(t),this.runDelay("open")},t.blur=t=>{this.getActivator(t),this.runDelay("close")}),t.keydown=t=>{t.keyCode===n.Do.esc&&(this.getActivator(t),this.runDelay("close"))},t},genActivatorAttributes(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition(){const t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent(){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:{[this.contentClass]:!0,menuable__content__active:this.isActive,"v-tooltip__content--fixed":this.activatorFixed},style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render(t){return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((()=>[this.genTransition()])),this.genActivator()])}})},4916:function(t,e){function i(t){return null==t||0===String(t).trim().length}e["Z"]={data(){return{rules:{required:t=>null!=t&&String(t).trim().length>0||"Obrigatório",greaterThanZero:t=>e=>i(e)?!0!==t||"Deve ser um número maior que zero":/^[1-9]\d*$/.test(e)||"Deve ser um número maior que zero",greaterOrEqualThanZero:t=>{if(null==t)return"Deve ser um número maior ou igual a zero";const e=parseInt(t,10);return Number.isInteger(e)&&e>=0||"Deve ser um número maior ou igual a zero"},lessThanOrEqual:(t,e)=>r=>{if(i(r))return!0!==e||"Deve ser um número menor ou igual a "+t;const s=parseInt(r,10);return Number.isInteger(s)&&s<=t||"Deve ser um número menor ou igual a "+t}}}},methods:{resetValidation(t){null!=t&&null!=this.$refs[t]?this.$refs[t].resetValidation():null!=this.$refs.form&&this.$refs.form.resetValidation()},validate(t){return null!=t&&null!=this.$refs[t]?this.$refs[t].validate():null!=this.$refs.form?this.$refs.form.validate():void 0}}}}}]);
//# sourceMappingURL=937.a174bbe6.js.map